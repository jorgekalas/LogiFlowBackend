extends ../layout

block content
  h2.mb-4 Editar Factura

  if error
    .alert.alert-danger.text-center #{error}

  form(method="post", action=`/invoices/${invoice._id}?_method=PUT`)
    .mb-3
      label.form-label Número
      input.form-control(type="text", name="number", required, value=invoice.number)

    .mb-3
      label.form-label Fecha
      input.form-control(type="date", name="date", required, value=invoice.date.toISOString().substring(0,10))

    .mb-3
      label.form-label Monto
      input.form-control(type="number", step="0.01", min="0", name="amount", required, value=invoice.amount)

    .mb-3
      label.form-label Asociar a Envío
      select.form-select(name="shipment")
        option(value="") Ninguno
        each s in shipments
          option(
            value=s._id
            selected=(invoice.shipment && String(invoice.shipment._id)===String(s._id))
          ) Envío #{s.sequence} - #{s.client ? s.client.name : "Sin cliente"}

    button.btn.btn-success(type="submit") Guardar
    a.btn.btn-secondary.ms-2(href="/invoices") Cancelar
